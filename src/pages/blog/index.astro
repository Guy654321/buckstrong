---
import { getCollection, type CollectionEntry } from 'astro:content';
import { Image } from 'astro:assets';
import Base from '../../layouts/Base.astro';
import Nav from '../../components/Nav.astro';
import Footer from '../../components/Footer.astro';
import Breadcrumbs from '../../components/Breadcrumbs.astro';
import CallNowButton from '../../components/CallNowButton.astro';
import { Icon } from 'astro-icon/components';
import heroImage from '../../assets/images/dillon-kydd-XGvwt544g8k-unsplash.jpg';
import { BUSINESS_INFO } from '../../data/business';
import { CALL_MARKETS, DEFAULT_CALL_MARKET } from '../../data/call-markets';

const breadcrumbs = [
  { label: 'Home', href: '/' },
  { label: 'Blog' }
];

const resourceLinks = [
  {
    title: 'Maintenance Basics',
    description: 'Quick checklists for lubricating hardware, testing balance, and keeping rollers on track.',
    href: '/blog/garage-door-maintenance-checklist-cincinnati-ohio',
    icon: 'mdi:clipboard-check-outline'
  },
  {
    title: 'Emergency Fixes',
    description: 'Step-by-step advice for stuck doors, broken springs, and off-track systems when time matters.',
    href: '/blog/emergency-garage-door-repair-cincinnati-oh',
    icon: 'mdi:alert-decagram-outline'
  },
  {
    title: 'Upgrade Guides',
    description: 'Compare openers, insulation options, and smart controls before you schedule an install.',
    href: '/blog',
    icon: 'mdi:home-lightning-bolt'
  },
  {
    title: 'Safety Essentials',
    description: 'Protect your family with seasonal tune-up reminders and sensor testing best practices.',
    href: '/blog/garage-door-spring-replacement-cost-cincinnati-oh',
    icon: 'mdi:shield-check'
  }
];

const displayPhoneNumber = BUSINESS_INFO.telephone;
const telephoneHref = `tel:${displayPhoneNumber.replace(/[^0-9+]/g, '') || displayPhoneNumber}`;
const callMarkets = CALL_MARKETS;
const defaultCallMarket = DEFAULT_CALL_MARKET;
const callModalId = 'header-call-modal';
const callLinkHref = defaultCallMarket?.phoneHref ?? telephoneHref;

const heroCallStandaloneClasses =
  'btn-accent text-sm sm:text-base lg:text-lg px-4 sm:px-6 lg:px-8 py-3 sm:py-4 w-full sm:w-auto gap-2';
const heroQuoteStandaloneClasses =
  'btn-outline-light text-sm sm:text-base lg:text-lg px-4 sm:px-6 lg:px-8 py-3 sm:py-4 inline-flex items-center justify-center font-semibold w-full sm:w-auto bg-white/10 hover:bg-white/20 gap-2';

const inlineCallStandaloneClasses =
  'btn-accent text-base sm:text-lg px-6 sm:px-7 py-3.5 sm:py-4 inline-flex items-center justify-center font-semibold w-full sm:w-auto gap-2';

// Get all blog posts and sort by publish date
let blogPosts: CollectionEntry<'blog'>[] = [];
try {
  const allPosts = await getCollection('blog');
  blogPosts = allPosts.sort((a, b) =>
    new Date(b.data.publishDate).getTime() - new Date(a.data.publishDate).getTime()
  );
} catch (error) {
  console.error('Error loading blog posts:', error);
  // Fallback to empty array if collection fails
  blogPosts = [];
}
---

<Base
  title="Buck Strong Garage Doors Blog | Tips & Repair Guides"
  description="Expert garage door tips, maintenance guides, and repair advice for the Cincinnati metro from Buck Strong Garage Doors. Learn how to keep your garage door running safely and efficiently."
>
  <Nav />
  <Breadcrumbs items={breadcrumbs} />
  
  
  <section class="relative py-20 lg:py-32 text-white overflow-hidden">
    <div class="absolute inset-0">
      <Image
        src={heroImage}
        alt="Professional garage door technician working on maintenance and repairs in Cincinnati, Ohio" 
        class="w-full h-full object-cover" 
        width="1600" 
        height="900" 
        fetchpriority="high" 
        loading="eager"
        decoding="sync"
        sizes="100vw"
        quality={80}
        data-geo-lat="39.1031"
        data-geo-lng="-84.5120"
      />
      <div class="absolute inset-0 bg-gradient-to-br from-primary/85 to-primary/70"></div>
    </div>
    
    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-6">
        Expert Garage Door Insights
      </h1>
      <p class="text-xl md:text-2xl text-white/95 mb-8 max-w-4xl mx-auto leading-relaxed">
        Professional tips, maintenance guides, and repair advice from trusted garage door experts serving Cincinnati homeowners
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        {callMarkets.length > 0 && defaultCallMarket ? (
          <button
            type="button"
            class={heroCallStandaloneClasses}
            data-call-modal-trigger
            aria-controls={callModalId}
            aria-expanded="false"
            aria-haspopup="dialog"
            aria-label="Choose a service area phone number"
          >
            <Icon name="mdi:phone" size="20" class="inline" aria-hidden="true" />
            <span>Call Now</span>
            <span class="sr-only">for the {defaultCallMarket.label} market</span>
          </button>
        ) : (
          <a href={telephoneHref} class={heroCallStandaloneClasses}>
            <Icon name="mdi:phone" size="20" class="inline" aria-hidden="true" />
            <span>Call Now:</span> <span class="nap-phone">{displayPhoneNumber}</span>
          </a>
        )}
        <a href="/contact" class={heroQuoteStandaloneClasses}>
          <Icon name="mdi:clipboard-text" size="20" class="inline" aria-hidden="true" />
          Get Free Quote
        </a>
      </div>
    </div>
  </section>

  
  <section class="py-16 bg-white">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-left">
      <h2 class="text-3xl font-bold text-ink mb-6">Why Our Garage Door Guides Matter</h2>
      <p class="text-lg text-ink/80 leading-relaxed mb-6">
        A reliable garage door protects your vehicles, storage, and main entrance, yet it is often the largest moving system in the home. The Buck Strong Garage Doors blog turns everyday repair calls into step-by-step resources so you can tackle maintenance with confidence.
      </p>
      <p class="text-lg text-ink/80 leading-relaxed">
        Each article is written by the technicians who complete repairs throughout the Cincinnati metro. Whether you need to silence a noisy opener, choose a new insulated panel, or prep for upcoming weather, you will find practical guidance rooted in real service experience.
      </p>
    </div>
  </section>

  
  <section class="py-16 bg-muted">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold text-ink mb-6">Find the Advice That Fits Your Project</h2>
      <div class="space-y-6 text-lg text-ink/80 leading-relaxed">
        <p>
          Looking for a quick fix? Start with our troubleshooting posts that explain common noises, remote control issues, and misaligned safety sensors. Planning a larger upgrade? Use our opener and door comparison guides to review insulation values, horsepower requirements, and smart-home features before you invest. Every article references the tools needed, the average time commitment, and which steps are best left to a professional.
        </p>
        <p>
          Homeowners and facility managers across the Cincinnati metro use the blog to understand why a technician recommended a particular repair. We include photos, diagrams, and checklists pulled directly from the field so you can see what we see. After reading, you will know how to maintain the door between professional tune-ups and how to spot early warning signs that warrant a service call.
        </p>
        <p>
          When you subscribe to our email updates, you will receive seasonal maintenance reminders and notices when new safety regulations or product recalls affect garage door equipment. It is the easiest way to stay informed without sifting through outdated advice on generic home-improvement forums.
        </p>
      </div>
    </div>
  </section>


  <section class="py-20 bg-white">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <h2 class="text-3xl font-bold text-ink mb-4">Latest Articles</h2>
        <p class="text-xl text-ink/70">Stay informed with expert garage door advice</p>
      </div>

      {blogPosts.length > 0 ? (
        <div class="grid gap-12">
          {blogPosts.map(post => (
            <article class="bg-card rounded-2xl shadow-sm ring-1 ring-black/5 overflow-hidden hover:shadow-lg transform-gpu transition-[transform,opacity] duration-300 group composite-surface hover:-translate-y-1 focus-within:-translate-y-1">
              
              <div class="p-8">
                <div class="flex flex-wrap gap-2 mb-6">
                  {post.data.tags.map(tag => (
                    <span class="bg-accent/10 text-accent px-3 py-1 rounded-full text-sm font-medium border border-accent/20">
                      {tag}
                    </span>
                  ))}
                </div>
                
                <h2 class="text-2xl md:text-3xl font-bold text-ink mb-4 group-hover:text-primary transition-colors leading-tight">
                  <a href={`/blog/${post.slug}`} class="hover:text-primary transition-colors">
                    {post.data.title}
                  </a>
                </h2>
                
                <p class="text-ink/70 mb-8 text-lg leading-relaxed">
                  {post.data.description}
                </p>
                
                <div class="flex items-center justify-between">
                  <div class="flex items-center text-sm text-ink/60">
                    <div class="bg-accent/10 w-8 h-8 rounded-full flex items-center justify-center mr-3">
                      <svg
                        class="w-4 h-4 text-accent"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        aria-hidden="true"
                        focusable="false"
                      >
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                      </svg>
                    </div>
                    <div>
                      <div class="font-medium text-ink">{post.data.author}</div>
                      <time datetime={post.data.publishDate.toISOString()} class="text-ink/60">
                        {post.data.publishDate.toLocaleDateString('en-US', {
                          year: 'numeric',
                          month: 'long',
                          day: 'numeric'
                        })}
                      </time>
                    </div>
                  </div>
                  
                  <a href={`/blog/${post.slug}`} class="inline-link inline-flex items-center gap-1 group-hover:translate-x-1 transform-gpu transition-[transform,opacity] duration-200 focus-visible:translate-x-1 composite-surface">
                    Read Article
                    <Icon name="mdi:arrow-right" size="16" aria-hidden="true" />
                  </a>
                </div>
              </div>
            </article>
          ))}
        </div>
      ) : (
        <div class="text-center py-12">
          <div class="bg-muted rounded-lg p-8">
            <h3 class="text-xl font-semibold text-ink mb-2">No blog posts found</h3>
            <p class="text-ink/70">Blog posts are being prepared. Check back soon for expert garage door advice!</p>
          </div>
        </div>
      )}
    </div>
  </section>

  
  <section class="py-16 bg-muted">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-ink mb-4">Browse Featured Topics</h2>
        <p class="text-xl text-ink/70">
          Jump straight into the maintenance tips, product comparisons, and safety checklists our readers request most.
        </p>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {resourceLinks.map(resource => (
          <a
            href={resource.href}
            class="group bg-white rounded-xl shadow-sm ring-1 ring-black/5 hover:shadow-lg transform-gpu transition-[transform,opacity] duration-300 p-6 text-left composite-surface hover:-translate-y-1 focus-visible:-translate-y-1"
          >
            <div class="flex items-center justify-between mb-4">
              <div class="bg-accent/10 text-accent w-12 h-12 rounded-full flex items-center justify-center">
                <Icon name={resource.icon} size="28" aria-hidden="true" />
              </div>
              <span class="text-primary font-semibold opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                Learn more
              </span>
            </div>
            <h3 class="text-xl font-semibold text-ink mb-2 group-hover:text-primary transition-colors">
              {resource.title}
            </h3>
            <p class="text-ink/70 leading-relaxed text-sm">
              {resource.description}
            </p>
          </a>
        ))}
      </div>
    </div>
  </section>

  
  <section class="py-16 bg-white">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
        
        <div class="text-center lg:text-left">
          <h2 class="text-2xl font-bold text-ink mb-4">Stay Updated</h2>
          <p class="text-ink/70 mb-6">
            Get expert garage door tips and maintenance advice delivered to your inbox.
          </p>
          <form class="flex flex-col sm:flex-row gap-3">
            <input 
              type="email" 
              placeholder="Enter your email" 
              class="flex-1 px-4 py-3 rounded-lg border border-ink/20 text-ink focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent"
            />
            <button type="submit" class="btn-primary px-6 py-3 whitespace-nowrap">
              Subscribe
            </button>
          </form>
        </div>
        
        
        <div class="text-center lg:text-left">
          <h3 class="text-2xl font-bold text-ink mb-4">Need Help Now?</h3>
          <p class="text-ink/70 mb-6">
            Don't wait for problems to get worse. Get professional help today.
          </p>
          <div class="flex flex-col sm:flex-row gap-3">
            {callMarkets.length > 0 && defaultCallMarket ? (
              <button
                type="button"
                class={inlineCallStandaloneClasses}
                data-call-modal-trigger
                aria-controls={callModalId}
                aria-expanded="false"
                aria-haspopup="dialog"
                aria-label="Choose a service area phone number"
              >
                <Icon name="mdi:phone" size="20" class="inline" aria-hidden="true" />
                <span>Call Now</span>
                <span class="sr-only">for the {defaultCallMarket.label} market</span>
              </button>
            ) : (
              <a href={telephoneHref} class={inlineCallStandaloneClasses}>
                <Icon name="mdi:phone" size="20" class="inline" aria-hidden="true" />
                <span>Call Now:</span>
                <span class="nap-phone">{displayPhoneNumber}</span>
              </a>
            )}
            <a href="/contact" class="btn-outline px-6 py-3">
              Get Free Quote
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <Footer />
  <CallNowButton />
</Base>
