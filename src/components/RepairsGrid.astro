---
import { Image } from 'astro:assets';
import { REPAIRS } from '../data/repairs';

export interface Props {
  limit?: number;
}

const { limit } = Astro.props;
const displayRepairs = limit ? REPAIRS.slice(0, limit) : REPAIRS;
---

<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
  {displayRepairs.map((repair, index) => (
    <div class="bg-card rounded-2xl shadow-sm ring-1 ring-black/5 overflow-hidden hover:shadow-lg transform-gpu transition-transform duration-300 group hover:-translate-y-1 focus-within:-translate-y-1">
      
      <div class="aspect-video overflow-hidden content-visibility-auto">
        <Image 
          src={repair.image}
          alt={repair.alt}
          width="400"
          height="225"
          class="w-full h-full card-image group-hover:scale-105 transition-transform duration-300"
          loading={index === 0 ? "eager" : "lazy"}
          fetchpriority={index === 0 ? "high" : "auto"}
          sizes="(max-width: 640px) 100vw, (max-width: 1024px) 50vw, (max-width: 1280px) 33vw, 25vw"
          quality={60}
          format="avif"
        />
      </div>
      
      
      <div class="p-6">
        <h3 class="text-xl font-semibold text-ink mb-3 group-hover:text-primary transition-colors">
          {repair.title}
        </h3>
        <p class="text-ink/80 mb-6 leading-relaxed">
          {repair.blurb}
        </p>
        
        
        <div class="flex flex-col sm:flex-row gap-3">
          <a 
            href={repair.href} 
            class="btn-outline flex-1 text-sm py-2 px-4"
          >
            View Repair Details
          </a>
          <a 
            href="/contact"
            class="btn-primary flex-1 text-sm py-2 px-4"
          >
            Get Quote
          </a>
        </div>
      </div>
    </div>
  ))}
</div>